(root (block (defrecord (atom name) of (tyRecordFields { (tyRecordField (atom first) :: (type (subtype (atom string) ( )))) , (tyRecordField (atom last) :: (type (subtype (atom string) ( )))) }))) (block (defty (atom name) ( ) :: (tyMax (type (tyRecord #{ (atom name) }))))) (block (defrecord (atom person) of (tyRecordFields { (tyRecordField (atom name) :: (type (subtype (atom name) ( )))) , (tyRecordField (atom phone) :: (type (subtype (atom pos_integer) ( )))) }))) (block (def (func (atom record_def_and_usage) (args ( )) (lra ->) (seqExprs (expr (matchable (var R')) = (expr (exprMax (record (recCreateMatch #{ (atom name) (recAssocs (recAssoc (atom first) = (expr (exprMax (term (string "Robert"))))) , (recAssoc (atom last) = (expr (exprMax (term (string "Virding")))))) }))))) (expr (matchable (var R)) = (expr (exprMax (record (recCreateMatch #{ (atom person) (recAssocs (recAssoc (atom name) = (expr (exprMax (var R')))) , (recAssoc (atom phone) = (expr (exprMax (term (integer 123)))))) }))))) (expr (matchable (var First)) = (expr (exprMax (record (recRead #{ (expr (exprMax (record (recRead #{ (expr (exprMax (var R))) (atom person) (atom name) })))) (atom name) (atom first) }))))))))) <EOF>)
